(this["webpackJsonpgame-gallery-app"]=this["webpackJsonpgame-gallery-app"]||[]).push([[0],{27:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},50:function(e,t,c){},57:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){"use strict";c.r(t);var r=c(2),s=c.n(r),a=c(28),n=c.n(a),i=(c(44),c(45),c(38)),o=Object(i.a)("https://mlrgblouczagbxdupdkp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMjk5ODg2OSwiZXhwIjoxOTQ4NTc0ODY5fQ.1vL5_Pa8YUX-b1MFCPFdmbkDs6wco8xZOYB54XKHT4E"),l=c(39),u=c(7),d=c(6),j=c(3),b=c.n(j),p=c(5),O=c(4),h=(c(50),c(1)),m=s.a.createContext();function x(){return Object(r.useContext)(m)}var f=function(e){var t=e.children,c=Object(r.useState)(),s=Object(O.a)(c,2),a=s[0],n=s[1],i=Object(r.useState)(!0),l=Object(O.a)(i,2),u=l[0],d=l[1];Object(r.useEffect)((function(){var e,t=o.auth.session();n(null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:null),d(!1);var c=o.auth.onAuthStateChange(function(){var e=Object(p.a)(b.a.mark((function e(t,c){var r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(null!==(r=null===c||void 0===c?void 0:c.user)&&void 0!==r?r:null),d(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),r=c.data;return function(){null===r||void 0===r||r.unsubscribe()}}),[]);var j={signUp:function(e){return o.auth.signUp(e)},signIn:function(e){return o.auth.signIn(e)},signOut:function(){return o.auth.signOut()},user:a,loading:u};return Object(h.jsx)(m.Provider,{value:j,children:!u&&t})},v=c(13),g=c(11),y=[{id:0,title:"Games",url:"/games"},{id:1,title:"Discussions",url:"/discussions"},{id:2,title:"Upload",url:"/upload"}];var N=function(e){return Object(h.jsxs)("button",{disabled:e.disabled,onClick:e.onClick,id:e.id,type:e.type,className:e.className,children:[e.value,e.icon]})},w=c.p+"static/media/GGA Logo.e8635831.svg";var C=function(){var e=x(),t=e.user,c=e.signOut,s=Object(r.useState)(!1),a=Object(O.a)(s,2),n=a[0],i=a[1],o=Object(r.useState)(),l=Object(O.a)(o,2),j=l[0],m=l[1],f=Object(r.useState)(!0),C=Object(O.a)(f,2),E=C[0],k=C[1],S=Object(r.useState)(!1),T=Object(O.a)(S,2),I=T[0],R=T[1],F=Object(d.f)(),L={color:"white",width:"40",height:"40"};function P(){R(!I)}function _(){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:F.push("/login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.push("/login");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!E);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return q.apply(this,arguments)}function q(){return(q=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){i(!!t)}),[t,j]),Object(h.jsxs)("div",{className:"navigation",children:[Object(h.jsx)("div",{className:"logo",children:Object(h.jsx)(u.b,{onClick:G,id:"logo",to:"/",children:Object(h.jsx)("img",{src:w,alt:"Back to homepage"})})}),Object(h.jsx)("div",{className:"web-nav",children:Object(h.jsx)("div",{className:"nav-links",children:y.map((function(e){return Object(h.jsxs)("div",{className:"nav-item",children:[Object(h.jsx)(u.b,{onClick:function(){G(e.id)},id:j===e.id?"option-active":"option",to:"".concat(e.url),children:e.title}),Object(h.jsx)("div",{className:j===e.id?"active":null})]},e.id)}))})}),n?Object(h.jsxs)("div",{className:"profile-dropdown",children:[Object(h.jsx)("div",{className:"profile-image",children:Object(h.jsx)("img",{src:"",alt:""})}),Object(h.jsx)("button",{className:"dropdown-toggle",onClick:P,children:I?Object(h.jsx)(g.d,{size:"20"}):Object(h.jsx)(g.c,{size:"20"})}),I?Object(h.jsxs)("div",{className:"dropdown-display",children:[Object(h.jsx)("div",{id:"dropdown-item",children:Object(h.jsx)(u.b,{onClick:P,id:"item",to:"/dashboard",children:"Profile"})}),Object(h.jsx)(N,{id:"logout-btn",onClick:function(){_(),P()},value:"Log out"})]}):null]}):Object(h.jsx)("div",{className:"btn-container",children:Object(h.jsx)(N,{id:"login-btn",onClick:function(){!function(){D.apply(this,arguments)}(),G()},value:"Log in"})}),Object(h.jsx)("div",{className:"mobile-nav",children:Object(h.jsx)("div",{className:"hamburger-menu",onClick:function(){return H.apply(this,arguments)},children:E?Object(h.jsx)(v.c,{style:L}):Object(h.jsx)(v.a,{style:L})})}),Object(h.jsx)("div",{className:E?"nav-menu":"nav-menu active",children:n?Object(h.jsxs)("div",{className:"menu",children:[Object(h.jsx)(u.b,{onClick:z,id:"m-option",to:"/games",children:"Games"}),Object(h.jsx)(u.b,{onClick:z,id:"m-option",to:"/discussions",children:"Discussions"}),Object(h.jsx)(u.b,{onClick:z,id:"m-option",to:"/upload",children:"Upload"}),Object(h.jsx)(u.b,{onClick:z,id:"m-option",to:"/dashboard",children:"Account"}),Object(h.jsx)(u.b,{onClick:function(){_(),z()},id:"logout-btn-m",to:"/login",children:"Log out"})]}):Object(h.jsxs)("div",{className:"menu",children:[Object(h.jsx)(u.b,{onClick:z,id:"m-option",to:"/games",children:"Games"}),Object(h.jsx)(u.b,{onClick:z,id:"m-option",to:"/discussions",children:"Discussions"}),Object(h.jsx)(u.b,{onClick:z,id:"m-option",to:"/register",children:"Sign up"}),Object(h.jsx)(u.b,{onClick:z,id:"login-btn-m",to:"/login",children:"Log in"})]})})]})},E=(c(57),c.p+"static/media/bgImage.99dc8eaf.jpg"),k=c(31);var S,T=function(){var e=Object(d.f)(),t=x().user,c=Object(r.useState)(!1),s=Object(O.a)(c,2),a=s[0],n=s[1];function i(){return(i=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/register");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(r.useEffect)((function(){n(!!t)}),[t]),Object(h.jsxs)("div",{className:"content",children:[Object(h.jsxs)("div",{className:"welcome-message-m",children:[Object(h.jsx)("h1",{children:"Game Gallery"}),Object(h.jsx)("span",{children:"If you are a game-dev enthusiast, this is the place for you to promote your games!"})]}),Object(h.jsx)("div",{className:"wrapper",children:Object(h.jsxs)("div",{className:"content-container",children:[Object(h.jsxs)("div",{className:"welcome-message",children:[Object(h.jsx)("h1",{children:"Game Gallery"}),Object(h.jsx)("span",{children:"If you are a game-dev enthusiast, this is the place for you to promote your games!"})]}),Object(h.jsx)("div",{className:"top-highlight"}),Object(h.jsx)("div",{className:"bottom-highlight"})]})}),Object(h.jsxs)("div",{className:"image-wrapper",children:[Object(h.jsx)("img",{src:E,alt:""}),a?null:Object(h.jsx)(N,{onClick:function(){return i.apply(this,arguments)},id:"sign-up",value:"Sign up",icon:Object(h.jsx)(k.a,{size:"20"})})]})]})},I=(c(27),c(32)),R=c(33).a.button(S||(S=Object(I.a)(["\n  width: 100%;\n  padding: 10px;\n  background-color: #007fc4;\n  border: none;\n  color: var(--main-theme-color-white);\n  font-weight: var(--font-w-6);\n  font-size: 16px;\n  &:hover {\n    cursor: pointer;\n    background-color: #008eda;\n  }\n"]))),F=Object(r.forwardRef)((function(e,t){var c=e.hasError,r=e.isFocused;return Object(h.jsxs)("div",{className:"input-container",children:[e.labelText?Object(h.jsx)("label",{children:e.labelText}):null,Object(h.jsx)("input",{className:e.className,id:e.id,type:e.type,placeholder:e.placeholder,style:r?{border:"1px solid red"}:e.style,isfocused:e.isFocused,onClick:e.onClick,onChange:e.onChange,accept:e.accept,ref:t,required:!0}),e.icon?Object(h.jsx)("span",{onClick:e.onClick,className:"toggle-visible",children:e.icon}):null,c?Object(h.jsx)("span",{className:"input-error",children:e.errorText}):null]})}));var L=function(){var e=Object(r.useState)(!1),t=Object(O.a)(e,2),c=t[0],s=t[1],a=Object(r.useState)(""),n=Object(O.a)(a,2),i=n[0],o=n[1],l=Object(r.createRef)(),j=Object(r.createRef)(),m=x().signIn,f=Object(d.f)();function v(){return v=Object(p.a)(b.a.mark((function e(t){var c,r,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=l.current.value,r=j.current.value,s(!0),o(""),e.next=7,m({email:c,password:r});case 7:a=e.sent,(n=a.error)?o(n.message):f.push("/"),s(!1);case 11:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}return Object(h.jsx)("div",{className:"login-page",children:Object(h.jsxs)("div",{className:"login-container",children:[Object(h.jsx)("div",{id:"heading",children:"Log in"}),Object(h.jsx)("div",{className:i?"error":null,children:i}),Object(h.jsxs)("form",{className:"login-form",onSubmit:function(e){return v.apply(this,arguments)},children:[Object(h.jsx)(F,{className:"email",type:"email",placeholder:"Email",ref:l}),Object(h.jsx)(F,{className:"password",type:"password",placeholder:"Password",ref:j}),Object(h.jsx)(R,{disabled:c,type:"submit",children:c?Object(h.jsx)("span",{children:"Loading..."}):Object(h.jsx)("span",{children:"Log in"})}),Object(h.jsx)(u.b,{to:"/register",id:"reg-redirect",children:"Don't have an account? Register here."})]})]})})},P=function(e,t){return e===t},_=c(17);var U=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),c=t[0],s=t[1],a=Object(r.useState)(!1),n=Object(O.a)(a,2),i=n[0],o=n[1],l=Object(r.useState)(),j=Object(O.a)(l,2),m=j[0],f=j[1],v=Object(r.useState)([]),y=Object(O.a)(v,2),N=y[0],w=y[1],C=Object(r.useState)(),E=Object(O.a)(C,2),k=E[0],S=E[1],T=Object(r.useState)(),I=Object(O.a)(T,2),L=I[0],U=I[1],D=Object(r.useState)(),H=Object(O.a)(D,2),z=H[0],q=H[1],G=Object(r.useRef)(),K=Object(r.useRef)(),M=Object(r.useRef)(),J=Object(d.f)(),A=x().signUp,B=0,Y=[];function V(){U(!L)}function W(){q(!z)}function X(){return s(""),S(G.current.value),!1!==/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i.test(k)}function $(){return($=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=K.current.value,Y=[t.length>=8,t.search(/[A-Z]/)>-1,t.search(/[0-9]/)>-1,t.search(/[!%$&+,:;=?@#]/)>-1],B=Y.reduce((function(e,t){return e+t})),f(B),w(Y);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return(Z=Object(p.a)(b.a.mark((function e(t){var c,r,a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=G.current.value,r=K.current.value,a=M.current.value,o(!0),s(""),X(),P(r,a)){e.next=10;break}return o(!1),e.abrupt("return",s("Passwords do not match."));case 10:if(!(m<4)){e.next=14;break}s("Password does not meet the requirements."),e.next=19;break;case 14:return e.next=16,A({email:c,password:r});case 16:n=e.sent,n.data,J.push("/");case 19:o(!1);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"register-page",children:Object(h.jsxs)("div",{className:"register-container",children:[Object(h.jsx)("div",{id:"heading",children:"Create an account"}),Object(h.jsxs)("form",{className:"register-form",onSubmit:function(e){return Z.apply(this,arguments)},children:[Object(h.jsx)("div",{className:"error",children:c}),Object(h.jsx)(F,{type:"email",className:"email",placeholder:"Email",ref:G,required:!0}),Object(h.jsx)(F,{type:L?"text":"password",className:"password",placeholder:"Password",ref:K,onChange:function(){return $.apply(this,arguments)},icon:L?Object(h.jsx)(_.a,{color:"008eda",onClick:V}):Object(h.jsx)(_.b,{color:"008eda",onClick:V}),required:!0}),Object(h.jsx)(F,{type:z?"text":"password",className:"password",placeholder:"Confirm password",ref:M,icon:z?Object(h.jsx)(_.a,{color:"008eda",onClick:W}):Object(h.jsx)(_.b,{color:"008eda",onClick:W}),required:!0}),Object(h.jsxs)("div",{className:"validations",children:[Object(h.jsxs)("div",{children:[N[0]?Object(h.jsx)(g.a,{size:"20",color:"green"}):Object(h.jsx)(g.b,{size:"20",color:"red"}),Object(h.jsx)("span",{children:"Password must be at least 8 characters."})]}),Object(h.jsxs)("div",{children:[N[1]?Object(h.jsx)(g.a,{size:"20",color:"green"}):Object(h.jsx)(g.b,{size:"20",color:"red"}),Object(h.jsx)("span",{children:"Password must have at least one uppercase letter."})]}),Object(h.jsxs)("div",{children:[N[2]?Object(h.jsx)(g.a,{size:"20",color:"green"}):Object(h.jsx)(g.b,{size:"20",color:"red"}),Object(h.jsx)("span",{children:"Password must have at least one number."})]}),Object(h.jsxs)("div",{children:[N[3]?Object(h.jsx)(g.a,{size:"20",color:"green"}):Object(h.jsx)(g.b,{size:"20",color:"red"}),Object(h.jsx)("span",{children:"Password must have at least one special character."})]})]}),Object(h.jsxs)(R,{disabled:i,type:"submit",children:[i?Object(h.jsx)("span",{children:"Loading..."}):Object(h.jsx)("span",{children:"Sign in"})," "]}),Object(h.jsx)(u.b,{to:"/login",id:"reg-redirect",children:"Already have an account? Log in."})]})]})})};c(59);var D=function(e){return Object(h.jsx)("div",{className:"card",onClick:e.onClick,children:Object(h.jsxs)("div",{className:"card-image",children:[Object(h.jsx)("img",{src:"".concat(e.URL),alt:""}),Object(h.jsxs)("div",{className:"card-info",children:[Object(h.jsx)("div",{id:"card-title",children:Object(h.jsx)("h2",{children:e.title})}),Object(h.jsx)("div",{id:"card-description",children:Object(h.jsx)("small",{children:e.description})}),Object(h.jsx)("div",{id:"card-item-price",children:Object(h.jsx)("p",{children:e.price})}),Object(h.jsx)("div",{id:"card-item-developer",children:Object(h.jsx)("p",{children:e.developer})})]})]})})},H=(c(60),"undefined"!==typeof document?document:{}),z=function(){var e=Object(r.useRef)(),t=H.documentElement,c=H.body;return[function(){if(c&&c.style&&!e.current){var r=window.innerWidth-t.clientWidth,s=parseInt(window.getComputedStyle(c).getPropertyValue("padding-right"))||0;t.style.position="relative",t.style.overflow="hidden",c.style.position="relative",c.style.paddingRight="".concat(s+r,"px"),e.current=!0}},function(){c&&c.style&&e.current&&(t.style.position="",t.style.overflow="",c.style.position="",c.style.paddingRight="",e.current=!1)}]},q=c(37),G=function(e){var t=e.openModal,c=e.setOpenModal,s=z(),a=Object(O.a)(s,2),n=a[0],i=a[1],o=Object(r.useState)(),l=Object(O.a)(o,2),u=l[0],d=l[1],j=Object(r.useState)(!1),m=Object(O.a)(j,2),x=m[0],f=m[1],g=Object(r.useState)(),y=Object(O.a)(g,2),w=y[0],C=y[1];function E(){return k.apply(this,arguments)}function k(){return(k=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C("Thank you for your purchase!"),f(!0),d(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d(!0),setTimeout((function(){E()}),5e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){console.log(t),t?n():i()}),[t]),Object(h.jsx)(h.Fragment,{children:t?Object(h.jsx)("div",{className:"card-modal",children:Object(h.jsx)("div",{className:"window",children:Object(h.jsxs)("div",{className:"window-content",children:[Object(h.jsx)("div",{className:"close-modal",children:Object(h.jsx)(N,{className:"close",onClick:function(){c(!1)},value:Object(h.jsx)(q.a,{style:{color:"whitesmoke",width:"30",height:"30"}})})}),Object(h.jsx)("div",{className:"image-container",children:Object(h.jsx)("img",{src:e.imageURL,alt:"s"})}),Object(h.jsx)("div",{className:"card-info-container",children:x?Object(h.jsx)("span",{style:{color:"lime"},children:w}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("h2",{className:"title",children:e.title}),Object(h.jsx)("p",{className:"description",children:e.desc}),Object(h.jsx)("p",{className:"price",children:e.price}),Object(h.jsx)("p",{className:"developer",children:e.dev})]})}),Object(h.jsx)("div",{className:"button",children:x?null:Object(h.jsx)(N,{disabled:u,id:"buy-btn",onClick:function(){return S.apply(this,arguments)},value:u?Object(h.jsx)("div",{className:"loader-container",children:Object(h.jsx)("span",{className:"loader",children:Object(h.jsx)(v.b,{style:{color:"white",width:"28",height:"28"}})})}):"Buy"})})]})})}):null})};c(61);var K=function(){var e=Object(r.useState)(),t=Object(O.a)(e,2),c=t[0],s=t[1],a=Object(r.useState)(""),n=Object(O.a)(a,2),i=n[0],l=n[1],u=Object(r.useState)(!1),d=Object(O.a)(u,2),j=d[0],m=d[1],x=Object(r.useState)(!1),f=Object(O.a)(x,2),g=f[0],y=f[1],N=Object(r.useState)(),w=Object(O.a)(N,2),C=w[0],E=w[1],k=Object(r.useState)(),S=Object(O.a)(k,2),T=S[0],I=S[1],R=Object(r.useState)(),F=Object(O.a)(R,2),L=F[0],P=F[1],_=Object(r.useState)(),U=Object(O.a)(_,2),H=U[0],z=U[1],q=Object(r.useState)(),K=Object(O.a)(q,2),M=K[0],J=K[1],A=[],B=[],Y=[],V=[],W=[],X=[],$=Object(r.useCallback)((function(){y(!0)}),[]),Z=function(e){E(e)},Q=function(e){I(e)},ee=function(e){P(e)},te=function(e){z(e)},ce=function(e){J(e)};function re(){return(re=Object(p.a)(b.a.mark((function e(){var t,c,r,a,n,i,u,d,j,p,O,x,f,v,g,y,N,w,C,E;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,o.from("games").select();case 3:return t=e.sent,c=t.data,e.next=7,o.from("games").select("title");case 7:return r=e.sent,a=r.data,e.next=11,o.from("games").select("description");case 11:return n=e.sent,i=n.data,e.next=15,o.from("games").select("price");case 15:return u=e.sent,d=u.data,e.next=19,o.from("games").select("image_url");case 19:return j=e.sent,p=j.data,e.next=23,o.from("games").select("developer");case 23:if(O=e.sent,x=O.data,0===c.length)m(!1),l("Sorry... There aren't any games yet.");else{for(f=0;f<c.length;f++)v=A[f],A.push(v);for(g in a)B.push(a[g]);for(y in i)Y.push(i[y]);for(N in d)V.push(d[N]);for(w in x)W.push(x[w]);for(C in p)X.push(p[C]);E=A.map((function(e,t){return Object(h.jsx)(D,{URL:X[t].image_url,title:B[t].title,description:Y[t].description,price:"".concat(V[t].price,"$"),developer:W[t].developer,onClick:function(){$(),Z(B[t].title),Q(Y[t].description),ee("".concat(V[t].price,"$")),ce(W[t].developer),te(X[t].image_url)}},t)})),s(E),m(!1)}case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){c||function(){re.apply(this,arguments)}()}),[C]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(G,{title:C,desc:T,price:L,imageURL:H,dev:M,openModal:g,setOpenModal:y}),Object(h.jsx)("div",{className:"game-display-page",children:j?Object(h.jsx)("div",{className:"loader-container",children:Object(h.jsx)("div",{className:"loader",children:Object(h.jsx)(v.b,{style:{color:"007fc4",width:"50",height:"50"}})})}):Object(h.jsx)("div",{className:i?"content-error":"content-page",children:i||c})})]})};c(62);var M=function(){var e=Object(r.useState)(""),t=Object(O.a)(e,2),c=t[0],s=t[1],a=Object(r.useState)(""),n=Object(O.a)(a,2),i=n[0],l=n[1],u=Object(r.useState)(!1),d=Object(O.a)(u,2),j=d[0],m=d[1],f=Object(r.useState)(""),g=Object(O.a)(f,2),y=g[0],w=g[1],C=Object(r.useState)(""),E=Object(O.a)(C,2),k=E[0],S=E[1],T=Object(r.useState)(""),I=Object(O.a)(T,2),R=I[0],L=I[1],P=Object(r.useState)(),_=Object(O.a)(P,2),U=_[0],D=_[1],H=Object(r.useState)(),z=Object(O.a)(H,2),q=z[0],G=z[1],K=Object(r.useRef)(),M=Object(r.useRef)(),J=Object(r.useRef)(),A=Object(r.useRef)(),B=Object(r.useRef)(),Y=Object(r.useRef)(),V=x().user;function W(){return X.apply(this,arguments)}function X(){return(X=Object(p.a)(b.a.mark((function e(){var t,c,r,s,a,n,i,l;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.from("profiles").select("username").eq("id",null===V||void 0===V?void 0:V.id);case 2:return t=e.sent,c=t.data,e.next=6,o.from("profiles").select("first_name").eq("id",null===V||void 0===V?void 0:V.id);case 6:return r=e.sent,s=r.data,e.next=10,o.from("profiles").select("last_name").eq("id",null===V||void 0===V?void 0:V.id);case 10:return a=e.sent,n=a.data,e.next=14,o.from("profiles").select("avatar_url").eq("id",null===V||void 0===V?void 0:V.id);case 14:i=e.sent,l=i.data,w(c[0].username),S(s[0].first_name),L(n[0].last_name),G(l[0].avatar_url),console.log(q);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return $=Object(p.a)(b.a.mark((function e(){var t,c,r,a,n,i,u,d,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t=K.current.value,c=M.current.value,r=J.current.value,a=A.current.value,e.next=7,o.storage.from("avatars").upload("profile_images/".concat(U.name),U);case 7:return n=e.sent,n.data,e.next=11,o.storage.from("avatars").getPublicUrl("profile_images/".concat(U.name));case 11:return i=e.sent,u=i.data,s(""),l(""),e.next=17,o.from("profiles").upsert({id:null===V||void 0===V?void 0:V.id,username:t,first_name:c,last_name:r,website:a,avatar_url:u.publicURL});case 17:d=e.sent,(j=d.error)?(l(""),s(j.message),m(!1)):(s(""),l("Changes saved successfully."),W(),K.current.value="",M.current.value="",J.current.value="",A.current.value="",Y.current.value="",m(!1)),m(!1);case 21:case"end":return e.stop()}}),e)}))),$.apply(this,arguments)}return Object(r.useEffect)((function(){W()}),[y,k,R]),Object(h.jsxs)("div",{className:"account-page",children:[Object(h.jsxs)("div",{className:"profile-container",children:[Object(h.jsx)("div",{className:"avatar-container",children:Object(h.jsx)("div",{className:"avatar",children:Object(h.jsx)("img",{src:q,alt:"",ref:B})})}),Object(h.jsxs)("div",{className:"upload-avatar",children:[Object(h.jsx)("label",{htmlFor:"file-upload",className:"file-upload-button",children:"Upload image"}),Object(h.jsx)(F,{id:"file-upload",type:"file",onChange:function(e){var t=e.target.files[0];s(""),l(""),D(t)},accept:"image/png",ref:Y})]}),Object(h.jsx)("div",{className:"user-info",children:Object(h.jsxs)("div",{className:"names",children:[Object(h.jsxs)("p",{children:[k," ",R]}),Object(h.jsx)("small",{children:y})]})})]}),Object(h.jsxs)("div",{className:"dashboard-content",children:[Object(h.jsxs)("div",{className:"notification-handling",children:[Object(h.jsx)("div",{className:i?"success":null,children:i}),Object(h.jsx)("div",{className:c?"error":null,children:c})]}),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsx)("label",{children:"General"})}),Object(h.jsxs)("div",{className:"sub-header",children:[Object(h.jsxs)("div",{className:"sub-header-content",children:[Object(h.jsx)("label",{children:"Username"}),Object(h.jsx)("input",{type:"text",id:"username",value:y,ref:K})]}),Object(h.jsxs)("div",{className:"sub-header-content",children:[Object(h.jsx)("label",{children:"First name"}),Object(h.jsx)("input",{type:"text",id:"fname",value:k,ref:M})]}),Object(h.jsxs)("div",{className:"sub-header-content",children:[Object(h.jsx)("label",{children:"Last name"}),Object(h.jsx)("input",{type:"text",id:"lname",value:R,ref:J})]}),Object(h.jsxs)("div",{className:"sub-header-content",children:[Object(h.jsx)("label",{children:"Website"}),Object(h.jsx)("input",{type:"text",id:"website",ref:A})]})]})]}),Object(h.jsxs)("div",{className:"container",children:[Object(h.jsx)("div",{className:"header",children:Object(h.jsx)("label",{children:"Security"})}),Object(h.jsxs)("div",{className:"sub-header",children:[Object(h.jsxs)("div",{className:"sub-header-content",children:[Object(h.jsx)("label",{children:"Password"}),Object(h.jsx)("input",{type:"password",id:"password"})]}),Object(h.jsxs)("div",{className:"sub-header-content",children:[Object(h.jsx)("label",{children:"Confirm new password"}),Object(h.jsx)("input",{type:"password",id:"c-password"})]})]})]}),Object(h.jsx)("div",{className:"button-container",children:Object(h.jsx)(N,{onClick:function(){return $.apply(this,arguments)},id:"save-btn",disabled:j,value:j?Object(h.jsx)("div",{className:"button-loader",children:Object(h.jsx)("span",{className:"loader-btn",children:Object(h.jsx)(v.b,{style:{color:"white",width:"20",height:"20"}})})}):"Save"})})]})]})},J=(c(63),Object(r.forwardRef)((function(e,t){var c=e.hasError,r=e.isFocused;return Object(h.jsxs)("div",{className:"textarea-container",children:[e.value?Object(h.jsx)("label",{children:e.value}):null,Object(h.jsx)("textarea",{className:e.className,style:r?{border:"1px solid red"}:e.style,onChange:e.onChange,onClick:e.onClick,placeholder:e.placeholder,isfocused:e.isFocused,ref:t,required:!0}),c?Object(h.jsx)("span",{className:"input-error",children:e.errorText}):null]})}))),A=c.p+"static/media/Upload_Instructions.2b83e67c.svg";var B=function(e,t){switch(t.type){case"TITLE_CLICK":return{titleErrorText:e.errorText="This field is required.",titleIsFocused:e.isFocused=!0,titleHasError:e.hasError=!0};case"DESCRIPTION_CLICK":return{descriptionErrorText:e.errorText="This field is required.",descriptionIsFocused:e.isFocused=!0,descriptionHasError:e.hasError=!0};case"PRICE_CLICK":return{priceErrorText:e.errorText="The field cannot contain letters or special symbols.",priceIsFocused:e.isFocused=!0,priceHasError:e.hasError=!0};case"DEVELOPER_CLICK":return{developerErrorText:e.errorText="This field is required.",developerIsFocused:e.isFocused=!0,developerHasError:e.hasError=!0};case"RESET":return c=t.payload,{errorText:s,isFocused:r,hasError:c};default:return e}var c,r,s};var Y=function(){var e=Object(r.useReducer)(B,{titleHasError:!1,titleIsFocused:!1,titleErrorText:"",descriptionHasError:!1,descriptionIsFocused:!1,descriptionErrorText:"",priceHasError:!1,priceIsFocused:!1,priceErrorText:"",developerHasError:!1,developerIsFocused:!1,developerErrorText:""}),t=Object(O.a)(e,2),c=t[0],s=t[1],a=Object(r.useState)(""),n=Object(O.a)(a,2),i=n[0],l=n[1],u=Object(r.useState)(""),d=Object(O.a)(u,2),j=d[0],m=d[1],f=Object(r.useState)(!1),v=Object(O.a)(f,2),g=v[0],y=v[1],w=Object(r.useState)(),C=Object(O.a)(w,2),E=C[0],k=C[1],S=Object(r.useRef)(),T=Object(r.useRef)(),I=Object(r.useRef)(),R=Object(r.useRef)(),L=Object(r.useRef)(),P=x().user,_={url:""};function U(){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(b.a.mark((function e(){var t,c,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S.current.value,c=T.current.value,r=I.current.value,a=R.current.value,l(""),m(""),S.current===document.activeElement?s(""===t?{type:"TITLE_CLICK"}:{type:"RESET"}):I.current===document.activeElement?isNaN(r)?s({type:"PRICE_CLICK"}):s({type:"RESET"}):T.current===document.activeElement?s(""===c?{type:"DESCRIPTION_CLICK"}:{type:"RESET"}):R.current===document.activeElement&&s(""===a?{type:"DEVELOPER_CLICK"}:{type:"RESET"});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(p.a)(b.a.mark((function e(t){var c,r,s,a,n,i,u,d,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=S.current.value,r=T.current.value,s=I.current.value,a=R.current.value,n=L.current.value,t.preventDefault(),l(""),m(""),y(!0),""===c||""===r||""===s||""===a||""===n){e.next=30;break}return e.next=12,o.storage.from("card-images").upload("images/".concat(E.name),E);case 12:return i=e.sent,i.data,u=o.storage.from("card-images").getPublicUrl("images/".concat(E.name)),d=u.publicURL,_.url=d,e.next=18,o.from("games").upsert({uploaded_by:null===P||void 0===P?void 0:P.id,image_url:_.url,title:c,description:r,price:s,developer:a});case 18:j=e.sent,j.error,S.current.value="",T.current.value="",I.current.value="",R.current.value="",L.current.value="",l(""),m("Game was uploaded successfully!"),y(!1),e.next=32;break;case 30:l("Please fill out all the fields!"),y(!1);case 32:y(!1);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"page",children:[Object(h.jsx)("div",{className:"upload-container",children:Object(h.jsx)("div",{className:"form-container",children:Object(h.jsxs)("form",{className:"upload-form",children:[Object(h.jsx)("div",{className:"form-header",children:"Upload a game"}),i||j?Object(h.jsx)("div",{className:"notification-handling",children:Object(h.jsx)("div",{className:j?"success":"error",children:j||i})}):null,Object(h.jsx)(F,{className:"upload-input",type:"text",placeholder:"Title",ref:S,hasError:c.titleHasError,isFocused:c.titleIsFocused,onClick:U,onChange:U,errorText:c.titleErrorText}),Object(h.jsx)(F,{type:"file",accept:"image/png",ref:L,onChange:function(e){var t=e.target.files[0];l(""),m(""),k(t),t.name.includes(".png")||(L.current.value="",l("Image is not the correct format."),k(null))}}),Object(h.jsx)(J,{className:"upload-input",placeholder:"Description",ref:T,hasError:c.descriptionHasError,isFocused:c.descriptionIsFocused,onClick:U,onChange:U,errorText:c.descriptionErrorText}),Object(h.jsx)(F,{className:"upload-input",type:"text",placeholder:"Price",ref:I,hasError:c.priceHasError,isFocused:c.priceIsFocused,onClick:U,onChange:U,errorText:c.priceErrorText}),Object(h.jsx)(F,{className:"upload-input",type:"text",placeholder:"Developer",ref:R,hasError:c.developerHasError,isFocused:c.developerIsFocused,onClick:U,onChange:U,errorText:c.developerErrorText}),Object(h.jsx)(N,{disabled:g||c.titleHasError||c.descriptionHasError||c.priceHasError||c.developerHasError||!E,onClick:function(e){return H.apply(this,arguments)},id:"upload-btn",value:g?Object(h.jsx)("span",{children:"Uploading..."}):Object(h.jsx)("span",{children:"Upload"})})]})})}),Object(h.jsx)("div",{className:"upload-guidelines",children:Object(h.jsx)("img",{src:A,alt:"instructions"})})]})};c(64);var V=function(){var e=Object(r.useRef)(),t=Object(r.useState)(),c=Object(O.a)(t,2),s=c[0],a=c[1],n=Object(r.useState)(),i=Object(O.a)(n,2),o=i[0],l=i[1],u=Object(r.useState)(),d=Object(O.a)(u,2),j=d[0],m=d[1];function x(){return f.apply(this,arguments)}function f(){return(f=Object(p.a)(b.a.mark((function t(){var c,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=e.current.value,r=[{text:"This field is required!"},{text:"The field can contain only letters!"}],e.current===document.activeElement&&(m(!0),""===c?(a(!0),l(r[0].text)):isNaN(+"".concat(c))?(a(!1),m(!1)):(a(!0),l(r[1].text)));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(h.jsx)("div",{className:"discussions-page",children:Object(h.jsx)(F,{className:"test-input",placeholder:"Input 1",ref:e,hasError:s,isFocused:j,onClick:x,onChange:x,errorText:o})})};var W=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(u.a,{children:Object(h.jsx)(f,{children:Object(h.jsxs)(l.a,{value:o,children:[Object(h.jsx)(d.c,{children:Object(h.jsx)(C,{})}),Object(h.jsx)(d.a,{exact:!0,path:"/",component:T}),Object(h.jsx)(d.a,{path:"/login",component:L}),Object(h.jsx)(d.a,{path:"/register",component:U}),Object(h.jsx)(d.a,{exact:!0,path:"/games",component:K}),Object(h.jsx)(d.a,{path:"/dashboard",component:M}),Object(h.jsx)(d.a,{path:"/discussions",component:V}),Object(h.jsx)(d.a,{path:"/upload",component:Y})]})})})})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,68)).then((function(t){var c=t.getCLS,r=t.getFID,s=t.getFCP,a=t.getLCP,n=t.getTTFB;c(e),r(e),s(e),a(e),n(e)}))};n.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(W,{})}),document.getElementById("root")),X()}},[[65,1,2]]]);
//# sourceMappingURL=main.bdf0d6f2.chunk.js.map