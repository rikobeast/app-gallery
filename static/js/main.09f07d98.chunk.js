(this["webpackJsonpgame-gallery-app"]=this["webpackJsonpgame-gallery-app"]||[]).push([[0],{27:function(e,t,c){},44:function(e,t,c){},45:function(e,t,c){},50:function(e,t,c){},57:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},64:function(e,t,c){},65:function(e,t,c){"use strict";c.r(t);var s=c(2),r=c.n(s),n=c(28),a=c.n(n),i=(c(44),c(45),c(38)),o=Object(i.a)("https://mlrgblouczagbxdupdkp.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoiYW5vbiIsImlhdCI6MTYzMjk5ODg2OSwiZXhwIjoxOTQ4NTc0ODY5fQ.1vL5_Pa8YUX-b1MFCPFdmbkDs6wco8xZOYB54XKHT4E"),l=c(39),d=c(7),u=c(6),j=c(3),b=c.n(j),p=c(5),h=c(4),O=(c(50),c(1)),m=r.a.createContext();function x(){return Object(s.useContext)(m)}var f=function(e){var t=e.children,c=Object(s.useState)(),r=Object(h.a)(c,2),n=r[0],a=r[1],i=Object(s.useState)(!0),l=Object(h.a)(i,2),d=l[0],u=l[1];Object(s.useEffect)((function(){var e,t=o.auth.session();a(null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:null),u(!1);var c=o.auth.onAuthStateChange(function(){var e=Object(p.a)(b.a.mark((function e(t,c){var s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(null!==(s=null===c||void 0===c?void 0:c.user)&&void 0!==s?s:null),u(!1);case 2:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}()),s=c.data;return function(){null===s||void 0===s||s.unsubscribe()}}),[]);var j={signUp:function(e){return o.auth.signUp(e)},signIn:function(e){return o.auth.signIn(e)},signOut:function(){return o.auth.signOut()},user:n,loading:d};return Object(O.jsx)(m.Provider,{value:j,children:!d&&t})},v=c(13),g=c(11),y=[{id:0,title:"Games",url:"/games"},{id:1,title:"Discussions",url:"/discussions"},{id:2,title:"Upload",url:"/upload"}];var N=function(e){return Object(O.jsxs)("button",{disabled:e.disabled,onClick:e.onClick,id:e.id,type:e.type,className:e.className,children:[e.value,e.icon]})},w=c.p+"static/media/GGA Logo.e8635831.svg";var C=function(){var e=x(),t=e.user,c=e.signOut,r=Object(s.useState)(!1),n=Object(h.a)(r,2),a=n[0],i=n[1],o=Object(s.useState)(),l=Object(h.a)(o,2),j=l[0],m=l[1],f=Object(s.useState)(!0),C=Object(h.a)(f,2),k=C[0],E=C[1],S=Object(s.useState)(!1),T=Object(h.a)(S,2),I=T[0],R=T[1],F=Object(u.f)(),L={color:"white",width:"40",height:"40"};function P(){R(!I)}function _(){return U.apply(this,arguments)}function U(){return(U=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:F.push("/login");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return(D=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:F.push("/login");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(!k);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return q.apply(this,arguments)}function q(){return(q=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(!0);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return K.apply(this,arguments)}function K(){return(K=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m(t);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){i(!!t)}),[t,j]),Object(O.jsxs)("div",{className:"navigation",children:[Object(O.jsx)("div",{className:"logo",children:Object(O.jsx)(d.b,{onClick:G,id:"logo",to:"/",children:Object(O.jsx)("img",{src:w,alt:"Back to homepage"})})}),Object(O.jsx)("div",{className:"web-nav",children:Object(O.jsx)("div",{className:"nav-links",children:y.map((function(e){return Object(O.jsxs)("div",{className:"nav-item",children:[Object(O.jsx)(d.b,{onClick:function(){G(e.id)},id:j===e.id?"option-active":"option",to:"".concat(e.url),children:e.title}),Object(O.jsx)("div",{className:j===e.id?"active":null})]},e.id)}))})}),a?Object(O.jsxs)("div",{className:"profile-dropdown",children:[Object(O.jsx)("div",{className:"profile-image",children:Object(O.jsx)("img",{src:"",alt:""})}),Object(O.jsx)("div",{className:"display-name",children:Object(O.jsx)("p",{id:"name",children:"Zhivko Minchev"})}),Object(O.jsx)("button",{className:"dropdown-toggle",onClick:P,children:I?Object(O.jsx)(g.d,{size:"20"}):Object(O.jsx)(g.c,{size:"20"})}),I?Object(O.jsxs)("div",{className:"dropdown-display",children:[Object(O.jsx)("div",{id:"dropdown-item",children:Object(O.jsx)(d.b,{onClick:P,id:"item",to:"/dashboard",children:"Profile"})}),Object(O.jsx)(N,{id:"logout-btn",onClick:function(){_(),P()},value:"Log out"})]}):null]}):Object(O.jsx)("div",{className:"btn-container",children:Object(O.jsx)(N,{id:"login-btn",onClick:function(){!function(){D.apply(this,arguments)}(),G()},value:"Log in"})}),Object(O.jsx)("div",{className:"mobile-nav",children:Object(O.jsx)("div",{className:"hamburger-menu",onClick:function(){return H.apply(this,arguments)},children:k?Object(O.jsx)(v.c,{style:L}):Object(O.jsx)(v.a,{style:L})})}),Object(O.jsx)("div",{className:k?"nav-menu":"nav-menu active",children:a?Object(O.jsxs)("div",{className:"menu",children:[Object(O.jsx)(d.b,{onClick:z,id:"m-option",to:"/games",children:"Games"}),Object(O.jsx)(d.b,{onClick:z,id:"m-option",to:"/discussions",children:"Discussions"}),Object(O.jsx)(d.b,{onClick:z,id:"m-option",to:"/upload",children:"Upload"}),Object(O.jsx)(d.b,{onClick:z,id:"m-option",to:"/dashboard",children:"Account"}),Object(O.jsx)(d.b,{onClick:function(){_(),z()},id:"logout-btn-m",to:"/login",children:"Log out"})]}):Object(O.jsxs)("div",{className:"menu",children:[Object(O.jsx)(d.b,{onClick:z,id:"m-option",to:"/games",children:"Games"}),Object(O.jsx)(d.b,{onClick:z,id:"m-option",to:"/discussions",children:"Discussions"}),Object(O.jsx)(d.b,{onClick:z,id:"m-option",to:"/register",children:"Sign up"}),Object(O.jsx)(d.b,{onClick:z,id:"login-btn-m",to:"/login",children:"Log in"})]})})]})},k=(c(57),c.p+"static/media/bgImage.99dc8eaf.jpg"),E=c(31);var S,T=function(){var e=Object(u.f)(),t=x().user,c=Object(s.useState)(!1),r=Object(h.a)(c,2),n=r[0],a=r[1];function i(){return(i=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.push("/register");case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(s.useEffect)((function(){a(!!t)}),[t]),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsxs)("div",{className:"welcome-message-m",children:[Object(O.jsx)("h1",{children:"Game Gallery"}),Object(O.jsx)("span",{children:"If you are a game-dev enthusiast, this is the place for you to promote your games!"})]}),Object(O.jsx)("div",{className:"wrapper",children:Object(O.jsxs)("div",{className:"content-container",children:[Object(O.jsxs)("div",{className:"welcome-message",children:[Object(O.jsx)("h1",{children:"Game Gallery"}),Object(O.jsx)("span",{children:"If you are a game-dev enthusiast, this is the place for you to promote your games!"})]}),Object(O.jsx)("div",{className:"top-highlight"}),Object(O.jsx)("div",{className:"bottom-highlight"})]})}),Object(O.jsxs)("div",{className:"image-wrapper",children:[Object(O.jsx)("img",{src:k,alt:""}),n?null:Object(O.jsx)(N,{onClick:function(){return i.apply(this,arguments)},id:"sign-up",value:"Sign up",icon:Object(O.jsx)(E.a,{size:"20"})})]})]})},I=(c(27),c(32)),R=c(33).a.button(S||(S=Object(I.a)(["\n  width: 100%;\n  padding: 10px;\n  background-color: #007fc4;\n  border: none;\n  color: var(--main-theme-color-white);\n  font-weight: var(--font-w-6);\n  font-size: 16px;\n  &:hover {\n    cursor: pointer;\n    background-color: #008eda;\n  }\n"]))),F=Object(s.forwardRef)((function(e,t){var c=e.hasError,s=e.isFocused;return Object(O.jsxs)("div",{className:"input-container",children:[e.labelText?Object(O.jsx)("label",{children:e.labelText}):null,Object(O.jsx)("input",{className:e.className,type:e.type,placeholder:e.placeholder,style:s?{border:"1px solid red"}:e.style,isfocused:e.isFocused,onClick:e.onClick,onChange:e.onChange,accept:e.accept,ref:t,required:!0}),e.icon?Object(O.jsx)("span",{onClick:e.onClick,className:"toggle-visible",children:e.icon}):null,c?Object(O.jsx)("span",{className:"input-error",children:e.errorText}):null]})}));var L=function(){var e=Object(s.useState)(!1),t=Object(h.a)(e,2),c=t[0],r=t[1],n=Object(s.useState)(""),a=Object(h.a)(n,2),i=a[0],o=a[1],l=Object(s.createRef)(),j=Object(s.createRef)(),m=x().signIn,f=Object(u.f)();function v(){return v=Object(p.a)(b.a.mark((function e(t){var c,s,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),c=l.current.value,s=j.current.value,r(!0),o(""),e.next=7,m({email:c,password:s});case 7:n=e.sent,(a=n.error)?o(a.message):f.push("/"),r(!1);case 11:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}return Object(O.jsx)("div",{className:"login-page",children:Object(O.jsxs)("div",{className:"login-container",children:[Object(O.jsx)("div",{id:"heading",children:"Log in"}),Object(O.jsx)("div",{className:i?"error":null,children:i}),Object(O.jsxs)("form",{className:"login-form",onSubmit:function(e){return v.apply(this,arguments)},children:[Object(O.jsx)(F,{className:"email",type:"email",placeholder:"Email",ref:l}),Object(O.jsx)(F,{className:"password",type:"password",placeholder:"Password",ref:j}),Object(O.jsx)(R,{disabled:c,type:"submit",children:c?Object(O.jsx)("span",{children:"Loading..."}):Object(O.jsx)("span",{children:"Log in"})}),Object(O.jsx)(d.b,{to:"/register",id:"reg-redirect",children:"Don't have an account? Register here."})]})]})})},P=function(e,t){return e===t},_=c(17);var U=function(){var e=Object(s.useState)(""),t=Object(h.a)(e,2),c=t[0],r=t[1],n=Object(s.useState)(!1),a=Object(h.a)(n,2),i=a[0],o=a[1],l=Object(s.useState)(),j=Object(h.a)(l,2),m=j[0],f=j[1],v=Object(s.useState)([]),y=Object(h.a)(v,2),N=y[0],w=y[1],C=Object(s.useState)(),k=Object(h.a)(C,2),E=k[0],S=k[1],T=Object(s.useState)(),I=Object(h.a)(T,2),L=I[0],U=I[1],D=Object(s.useState)(),H=Object(h.a)(D,2),z=H[0],q=H[1],G=Object(s.useRef)(),K=Object(s.useRef)(),M=Object(s.useRef)(),J=Object(u.f)(),A=x().signUp,B=0,Y=[];function V(){U(!L)}function W(){q(!z)}function X(){return r(""),S(G.current.value),!1!==/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/i.test(E)}function Z(){return(Z=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=K.current.value,Y=[t.length>=8,t.search(/[A-Z]/)>-1,t.search(/[0-9]/)>-1,t.search(/[!%$&+,:;=?@#]/)>-1],B=Y.reduce((function(e,t){return e+t})),f(B),w(Y);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(p.a)(b.a.mark((function e(t){var c,s,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),c=G.current.value,s=K.current.value,n=M.current.value,o(!0),r(""),X(),P(s,n)){e.next=10;break}return o(!1),e.abrupt("return",r("Passwords do not match."));case 10:if(!(m<4)){e.next=14;break}r("Password does not meet the requirements."),e.next=19;break;case 14:return e.next=16,A({email:c,password:s});case 16:a=e.sent,a.data,J.push("/");case 19:o(!1);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsx)("div",{className:"register-page",children:Object(O.jsxs)("div",{className:"register-container",children:[Object(O.jsx)("div",{id:"heading",children:"Create an account"}),Object(O.jsxs)("form",{className:"register-form",onSubmit:function(e){return $.apply(this,arguments)},children:[Object(O.jsx)("div",{className:"error",children:c}),Object(O.jsx)(F,{type:"email",className:"email",placeholder:"Email",ref:G,required:!0}),Object(O.jsx)(F,{type:L?"text":"password",className:"password",placeholder:"Password",ref:K,onChange:function(){return Z.apply(this,arguments)},icon:L?Object(O.jsx)(_.a,{color:"008eda",onClick:V}):Object(O.jsx)(_.b,{color:"008eda",onClick:V}),required:!0}),Object(O.jsx)(F,{type:z?"text":"password",className:"password",placeholder:"Confirm password",ref:M,icon:z?Object(O.jsx)(_.a,{color:"008eda",onClick:W}):Object(O.jsx)(_.b,{color:"008eda",onClick:W}),required:!0}),Object(O.jsxs)("div",{className:"validations",children:[Object(O.jsxs)("div",{children:[N[0]?Object(O.jsx)(g.a,{size:"20",color:"green"}):Object(O.jsx)(g.b,{size:"20",color:"red"}),Object(O.jsx)("span",{children:"Password must be at least 8 characters."})]}),Object(O.jsxs)("div",{children:[N[1]?Object(O.jsx)(g.a,{size:"20",color:"green"}):Object(O.jsx)(g.b,{size:"20",color:"red"}),Object(O.jsx)("span",{children:"Password must have at least one uppercase letter."})]}),Object(O.jsxs)("div",{children:[N[2]?Object(O.jsx)(g.a,{size:"20",color:"green"}):Object(O.jsx)(g.b,{size:"20",color:"red"}),Object(O.jsx)("span",{children:"Password must have at least one number."})]}),Object(O.jsxs)("div",{children:[N[3]?Object(O.jsx)(g.a,{size:"20",color:"green"}):Object(O.jsx)(g.b,{size:"20",color:"red"}),Object(O.jsx)("span",{children:"Password must have at least one special character."})]})]}),Object(O.jsxs)(R,{disabled:i,type:"submit",children:[i?Object(O.jsx)("span",{children:"Loading..."}):Object(O.jsx)("span",{children:"Sign in"})," "]}),Object(O.jsx)(d.b,{to:"/login",id:"reg-redirect",children:"Already have an account? Log in."})]})]})})};c(59);var D=function(e){return Object(O.jsx)("div",{className:"card",onClick:e.onClick,children:Object(O.jsxs)("div",{className:"card-image",children:[Object(O.jsx)("img",{src:"".concat(e.URL),alt:""}),Object(O.jsxs)("div",{className:"card-info",children:[Object(O.jsx)("div",{id:"card-title",children:Object(O.jsx)("h2",{children:e.title})}),Object(O.jsx)("div",{id:"card-description",children:Object(O.jsx)("small",{children:e.description})}),Object(O.jsx)("div",{id:"card-item-price",children:Object(O.jsx)("p",{children:e.price})}),Object(O.jsx)("div",{id:"card-item-developer",children:Object(O.jsx)("p",{children:e.developer})})]})]})})},H=(c(60),"undefined"!==typeof document?document:{}),z=function(){var e=Object(s.useRef)(),t=H.documentElement,c=H.body;return[function(){if(c&&c.style&&!e.current){var s=window.innerWidth-t.clientWidth,r=parseInt(window.getComputedStyle(c).getPropertyValue("padding-right"))||0;t.style.position="relative",t.style.overflow="hidden",c.style.position="relative",c.style.paddingRight="".concat(r+s,"px"),e.current=!0}},function(){c&&c.style&&e.current&&(t.style.position="",t.style.overflow="",c.style.position="",c.style.paddingRight="",e.current=!1)}]},q=c(37),G=function(e){var t=e.openModal,c=e.setOpenModal,r=z(),n=Object(h.a)(r,2),a=n[0],i=n[1],o=Object(s.useState)(),l=Object(h.a)(o,2),d=l[0],u=l[1],j=Object(s.useState)(!1),m=Object(h.a)(j,2),x=m[0],f=m[1],g=Object(s.useState)(),y=Object(h.a)(g,2),w=y[0],C=y[1];function k(){return E.apply(this,arguments)}function E(){return(E=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:C("Thank you for your purchase!"),f(!0),u(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(p.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u(!0),setTimeout((function(){k()}),5e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){console.log(t),t?a():i()}),[t]),Object(O.jsx)(O.Fragment,{children:t?Object(O.jsx)("div",{className:"card-modal",children:Object(O.jsx)("div",{className:"window",children:Object(O.jsxs)("div",{className:"window-content",children:[Object(O.jsx)("div",{className:"close-modal",children:Object(O.jsx)(N,{className:"close",onClick:function(){c(!1)},value:Object(O.jsx)(q.a,{style:{color:"whitesmoke",width:"30",height:"30"}})})}),Object(O.jsx)("div",{className:"image-container",children:Object(O.jsx)("img",{src:e.imageURL,alt:"s"})}),Object(O.jsx)("div",{className:"card-info-container",children:x?Object(O.jsx)("span",{style:{color:"lime"},children:w}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h2",{className:"title",children:e.title}),Object(O.jsx)("p",{className:"description",children:e.desc}),Object(O.jsx)("p",{className:"price",children:e.price}),Object(O.jsx)("p",{className:"developer",children:e.dev})]})}),Object(O.jsx)("div",{className:"button",children:x?null:Object(O.jsx)(N,{disabled:d,id:"buy-btn",onClick:function(){return S.apply(this,arguments)},value:d?Object(O.jsx)("div",{className:"loader-container",children:Object(O.jsx)("span",{className:"loader",children:Object(O.jsx)(v.b,{style:{color:"white",width:"28",height:"28"}})})}):"Buy"})})]})})}):null})};c(61);var K=function(){var e=Object(s.useState)(),t=Object(h.a)(e,2),c=t[0],r=t[1],n=Object(s.useState)(""),a=Object(h.a)(n,2),i=a[0],l=a[1],d=Object(s.useState)(!1),u=Object(h.a)(d,2),j=u[0],m=u[1],x=Object(s.useState)(!1),f=Object(h.a)(x,2),g=f[0],y=f[1],N=Object(s.useState)(),w=Object(h.a)(N,2),C=w[0],k=w[1],E=Object(s.useState)(),S=Object(h.a)(E,2),T=S[0],I=S[1],R=Object(s.useState)(),F=Object(h.a)(R,2),L=F[0],P=F[1],_=Object(s.useState)(),U=Object(h.a)(_,2),H=U[0],z=U[1],q=Object(s.useState)(),K=Object(h.a)(q,2),M=K[0],J=K[1],A=[],B=[],Y=[],V=[],W=[],X=[],Z=Object(s.useCallback)((function(){y(!0)}),[]),$=function(e){k(e)},Q=function(e){I(e)},ee=function(e){P(e)},te=function(e){z(e)},ce=function(e){J(e)};function se(){return(se=Object(p.a)(b.a.mark((function e(){var t,c,s,n,a,i,d,u,j,p,h,x,f,v,g,y,N,w,C,k;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,o.from("games").select();case 3:return t=e.sent,c=t.data,e.next=7,o.from("games").select("title");case 7:return s=e.sent,n=s.data,e.next=11,o.from("games").select("description");case 11:return a=e.sent,i=a.data,e.next=15,o.from("games").select("price");case 15:return d=e.sent,u=d.data,e.next=19,o.from("games").select("image_url");case 19:return j=e.sent,p=j.data,e.next=23,o.from("games").select("developer");case 23:if(h=e.sent,x=h.data,0===c.length)m(!1),l("Sorry... There aren't any games yet.");else{for(f=0;f<c.length;f++)v=A[f],A.push(v);for(g in n)B.push(n[g]);for(y in i)Y.push(i[y]);for(N in u)V.push(u[N]);for(w in x)W.push(x[w]);for(C in p)X.push(p[C]);k=A.map((function(e,t){return Object(O.jsx)(D,{URL:X[t].image_url,title:B[t].title,description:Y[t].description,price:"".concat(V[t].price,"$"),developer:W[t].developer,onClick:function(){Z(),$(B[t].title),Q(Y[t].description),ee("".concat(V[t].price,"$")),ce(W[t].developer),te(X[t].image_url)}},t)})),r(k),m(!1)}case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(s.useEffect)((function(){c||function(){se.apply(this,arguments)}()}),[C]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G,{title:C,desc:T,price:L,imageURL:H,dev:M,openModal:g,setOpenModal:y}),Object(O.jsx)("div",{className:"game-display-page",children:j?Object(O.jsx)("div",{className:"loader-container",children:Object(O.jsx)("div",{className:"loader",children:Object(O.jsx)(v.b,{style:{color:"007fc4",width:"50",height:"50"}})})}):Object(O.jsx)("div",{className:i?"content-error":"content-page",children:i||c})})]})};c(62);var M=function(){var e=Object(s.useState)(""),t=Object(h.a)(e,2),c=t[0],r=t[1],n=Object(s.useState)(""),a=Object(h.a)(n,2),i=a[0],l=a[1],d=Object(s.useState)(!1),u=Object(h.a)(d,2),j=u[0],m=u[1],f=Object(s.useState)(""),g=Object(h.a)(f,2),y=g[0],w=g[1],C=Object(s.useState)(""),k=Object(h.a)(C,2),E=k[0],S=k[1],T=Object(s.useState)(""),I=Object(h.a)(T,2),R=I[0],F=I[1],L=Object(s.useRef)(),P=Object(s.useRef)(),_=Object(s.useRef)(),U=Object(s.useRef)(),D=x().user;function H(){return z.apply(this,arguments)}function z(){return(z=Object(p.a)(b.a.mark((function e(){var t,c,s,r,n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.from("profiles").select("username").eq("id",null===D||void 0===D?void 0:D.id);case 2:return t=e.sent,c=t.data,e.next=6,o.from("profiles").select("first_name").eq("id",null===D||void 0===D?void 0:D.id);case 6:return s=e.sent,r=s.data,e.next=10,o.from("profiles").select("last_name").eq("id",null===D||void 0===D?void 0:D.id);case 10:n=e.sent,a=n.data,w(c[0].username),S(r[0].first_name),F(a[0].last_name);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return q=Object(p.a)(b.a.mark((function e(){var t,c,s,n,a,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),t=L.current.value,c=P.current.value,s=_.current.value,n=U.current.value,H(),r(""),l(""),e.next=10,o.from("profiles").upsert({id:null===D||void 0===D?void 0:D.id,username:t,first_name:c,last_name:s,website:n});case 10:a=e.sent,(i=a.error)?(l(""),r(i.message),m(!1)):(r(""),l("Changes saved successfully."),L.current.value="",P.current.value="",_.current.value="",U.current.value="",m(!1)),m(!1);case 14:case"end":return e.stop()}}),e)}))),q.apply(this,arguments)}return Object(s.useEffect)((function(){H()}),[y,E,R]),Object(O.jsxs)("div",{className:"account-page",children:[Object(O.jsxs)("div",{className:"profile-container",children:[Object(O.jsx)("div",{className:"avatar-container",children:Object(O.jsx)("div",{className:"avatar"})}),Object(O.jsx)("div",{className:"user-info",children:Object(O.jsxs)("div",{className:"names",children:[Object(O.jsxs)("p",{children:[E," ",R]}),Object(O.jsx)("small",{children:y})]})})]}),Object(O.jsxs)("div",{className:"dashboard-content",children:[Object(O.jsxs)("div",{className:"notification-handling",children:[Object(O.jsx)("div",{className:i?"success":null,children:i}),Object(O.jsx)("div",{className:c?"error":null,children:c})]}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("label",{children:"General"})}),Object(O.jsxs)("div",{className:"sub-header",children:[Object(O.jsxs)("div",{className:"sub-header-content",children:[Object(O.jsx)("label",{children:"Username"}),Object(O.jsx)("input",{type:"text",id:"username",ref:L})]}),Object(O.jsxs)("div",{className:"sub-header-content",children:[Object(O.jsx)("label",{children:"First name"}),Object(O.jsx)("input",{type:"text",id:"fname",ref:P})]}),Object(O.jsxs)("div",{className:"sub-header-content",children:[Object(O.jsx)("label",{children:"Last name"}),Object(O.jsx)("input",{type:"text",id:"lname",ref:_})]}),Object(O.jsxs)("div",{className:"sub-header-content",children:[Object(O.jsx)("label",{children:"Website"}),Object(O.jsx)("input",{type:"text",id:"website",ref:U})]})]})]}),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"header",children:Object(O.jsx)("label",{children:"Security"})}),Object(O.jsxs)("div",{className:"sub-header",children:[Object(O.jsxs)("div",{className:"sub-header-content",children:[Object(O.jsx)("label",{children:"Password"}),Object(O.jsx)("input",{type:"password",id:"password"})]}),Object(O.jsxs)("div",{className:"sub-header-content",children:[Object(O.jsx)("label",{children:"Confirm new password"}),Object(O.jsx)("input",{type:"password",id:"c-password"})]})]})]}),Object(O.jsx)("div",{className:"button-container",children:Object(O.jsx)(N,{onClick:function(){return q.apply(this,arguments)},id:"save-btn",disabled:j,value:j?Object(O.jsx)("div",{className:"button-loader",children:Object(O.jsx)("span",{className:"loader-btn",children:Object(O.jsx)(v.b,{style:{color:"white",width:"20",height:"20"}})})}):"Save"})})]})]})},J=(c(63),Object(s.forwardRef)((function(e,t){var c=e.hasError,s=e.isFocused;return Object(O.jsxs)("div",{className:"textarea-container",children:[e.value?Object(O.jsx)("label",{children:e.value}):null,Object(O.jsx)("textarea",{className:e.className,style:s?{border:"1px solid red"}:e.style,onChange:e.onChange,onClick:e.onClick,placeholder:e.placeholder,isfocused:e.isFocused,ref:t,required:!0}),c?Object(O.jsx)("span",{className:"input-error",children:e.errorText}):null]})}))),A=c.p+"static/media/Upload_Instructions.2b83e67c.svg";var B=function(e,t){switch(t.type){case"TITLE_CLICK":return{titleErrorText:e.errorText="This field is required.",titleIsFocused:e.isFocused=!0,titleHasError:e.hasError=!0};case"DESCRIPTION_CLICK":return{descriptionErrorText:e.errorText="This field is required.",descriptionIsFocused:e.isFocused=!0,descriptionHasError:e.hasError=!0};case"PRICE_CLICK":return{priceErrorText:e.errorText="The field cannot contain letters or special symbols.",priceIsFocused:e.isFocused=!0,priceHasError:e.hasError=!0};case"DEVELOPER_CLICK":return{developerErrorText:e.errorText="This field is required.",developerIsFocused:e.isFocused=!0,developerHasError:e.hasError=!0};case"RESET":return c=t.payload,{errorText:r,isFocused:s,hasError:c};default:return e}var c,s,r};var Y=function(){var e=Object(s.useReducer)(B,{titleHasError:!1,titleIsFocused:!1,titleErrorText:"",descriptionHasError:!1,descriptionIsFocused:!1,descriptionErrorText:"",priceHasError:!1,priceIsFocused:!1,priceErrorText:"",developerHasError:!1,developerIsFocused:!1,developerErrorText:""}),t=Object(h.a)(e,2),c=t[0],r=t[1],n=Object(s.useState)(""),a=Object(h.a)(n,2),i=a[0],l=a[1],d=Object(s.useState)(""),u=Object(h.a)(d,2),j=u[0],m=u[1],f=Object(s.useState)(!1),v=Object(h.a)(f,2),g=v[0],y=v[1],w=Object(s.useState)(),C=Object(h.a)(w,2),k=C[0],E=C[1],S=Object(s.useRef)(),T=Object(s.useRef)(),I=Object(s.useRef)(),R=Object(s.useRef)(),L=Object(s.useRef)(),P=x().user,_={url:""};function U(){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(b.a.mark((function e(){var t,c,s,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=S.current.value,c=T.current.value,s=I.current.value,n=R.current.value,l(""),m(""),S.current===document.activeElement?r(""===t?{type:"TITLE_CLICK"}:{type:"RESET"}):I.current===document.activeElement?isNaN(s)?r({type:"PRICE_CLICK"}):r({type:"RESET"}):T.current===document.activeElement?r(""===c?{type:"DESCRIPTION_CLICK"}:{type:"RESET"}):R.current===document.activeElement&&r(""===n?{type:"DEVELOPER_CLICK"}:{type:"RESET"});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(p.a)(b.a.mark((function e(t){var c,s,r,n,a,i,d,u,j;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=S.current.value,s=T.current.value,r=I.current.value,n=R.current.value,a=L.current.value,t.preventDefault(),l(""),m(""),y(!0),""===c||""===s||""===r||""===n||""===a){e.next=30;break}return e.next=12,o.storage.from("card-images").upload("images/".concat(k.name),k);case 12:return i=e.sent,i.data,d=o.storage.from("card-images").getPublicUrl("images/".concat(k.name)),u=d.publicURL,_.url=u,e.next=18,o.from("games").upsert({uploaded_by:null===P||void 0===P?void 0:P.id,image_url:_.url,title:c,description:s,price:r,developer:n});case 18:j=e.sent,j.error,S.current.value="",T.current.value="",I.current.value="",R.current.value="",L.current.value="",l(""),m("Game was uploaded successfully!"),y(!1),e.next=32;break;case 30:l("Please fill out all the fields!"),y(!1);case 32:y(!1);case 33:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(O.jsxs)("div",{className:"page",children:[Object(O.jsx)("div",{className:"upload-container",children:Object(O.jsx)("div",{className:"form-container",children:Object(O.jsxs)("form",{className:"upload-form",children:[Object(O.jsx)("div",{className:"form-header",children:"Upload a game"}),i||j?Object(O.jsx)("div",{className:"notification-handling",children:Object(O.jsx)("div",{className:j?"success":"error",children:j||i})}):null,Object(O.jsx)(F,{className:"test-input",type:"text",placeholder:"Title",ref:S,hasError:c.titleHasError,isFocused:c.titleIsFocused,onClick:U,onChange:U,errorText:c.titleErrorText}),Object(O.jsx)(F,{type:"file",accept:"image/png",ref:L,onChange:function(e){var t=e.target.files[0];l(""),m(""),E(t),t.name.includes(".png")||(L.current.value="",l("Image is not the correct format."),E(null))}}),Object(O.jsx)(J,{className:"test-input",placeholder:"Description",ref:T,hasError:c.descriptionHasError,isFocused:c.descriptionIsFocused,onClick:U,onChange:U,errorText:c.descriptionErrorText}),Object(O.jsx)(F,{className:"test-input",type:"text",placeholder:"Price",ref:I,hasError:c.priceHasError,isFocused:c.priceIsFocused,onClick:U,onChange:U,errorText:c.priceErrorText}),Object(O.jsx)(F,{className:"test-input",type:"text",placeholder:"Developer",ref:R,hasError:c.developerHasError,isFocused:c.developerIsFocused,onClick:U,onChange:U,errorText:c.developerErrorText}),Object(O.jsx)(N,{disabled:g||c.titleHasError||c.descriptionHasError||c.priceHasError||c.developerHasError||!k,onClick:function(e){return H.apply(this,arguments)},id:"upload-btn",value:g?Object(O.jsx)("span",{children:"Uploading..."}):Object(O.jsx)("span",{children:"Upload"})})]})})}),Object(O.jsx)("div",{className:"upload-guidelines",children:Object(O.jsx)("img",{src:A,alt:"instructions"})})]})};c(64);var V=function(){var e=Object(s.useRef)(),t=Object(s.useState)(),c=Object(h.a)(t,2),r=c[0],n=c[1],a=Object(s.useState)(),i=Object(h.a)(a,2),o=i[0],l=i[1],d=Object(s.useState)(),u=Object(h.a)(d,2),j=u[0],m=u[1];function x(){return f.apply(this,arguments)}function f(){return(f=Object(p.a)(b.a.mark((function t(){var c,s;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=e.current.value,s=[{text:"This field is required!"},{text:"The field can contain only letters!"}],e.current===document.activeElement&&(m(!0),""===c?(n(!0),l(s[0].text)):isNaN(+"".concat(c))?(n(!1),m(!1)):(n(!0),l(s[1].text)));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(O.jsx)("div",{className:"discussions-page",children:Object(O.jsx)(F,{className:"test-input",placeholder:"Input 1",ref:e,hasError:r,isFocused:j,onClick:x,onChange:x,errorText:o})})};var W=function(){return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(d.a,{children:Object(O.jsx)(f,{children:Object(O.jsxs)(l.a,{value:o,children:[Object(O.jsx)(u.c,{children:Object(O.jsx)(C,{})}),Object(O.jsx)(u.a,{exact:!0,path:"/",component:T}),Object(O.jsx)(u.a,{path:"/login",component:L}),Object(O.jsx)(u.a,{path:"/register",component:U}),Object(O.jsx)(u.a,{exact:!0,path:"/games",component:K}),Object(O.jsx)(u.a,{path:"/dashboard",component:M}),Object(O.jsx)(u.a,{path:"/discussions",component:V}),Object(O.jsx)(u.a,{path:"/upload",component:Y})]})})})})},X=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,68)).then((function(t){var c=t.getCLS,s=t.getFID,r=t.getFCP,n=t.getLCP,a=t.getTTFB;c(e),s(e),r(e),n(e),a(e)}))};a.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(W,{})}),document.getElementById("root")),X()}},[[65,1,2]]]);
//# sourceMappingURL=main.09f07d98.chunk.js.map